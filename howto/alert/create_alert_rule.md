# 创建告警规则

本文章详细介绍如何创建触发告警的规则。告警规则可针对数据原始测点或经流处理后的计算点定义。例如，对某台风机，定义当风速超过30米/秒时即触发告警，并且报告预设的告警级别和告警内容。

告警规则面向指定的模型，根据设置可作用于以下范围：

- 所有基于该模型实例化的资产
- 指定资产树中的基于该模型实例化的资产

## 开始前准备

你需要具备告警服务的操作权限。如果没有，需联系组织管理员添加。有关EnOS内的用户权限，参见[策略，角色，与权限](/docs/iam/zh_CN/latest/access_policy)。

创建告警规则前，须完成以下操作：
- 定义根据该规则触发告警的严重程度，参见[创建告警级别](create_alert_severity)。
- 定义根据该规则出发告警所上报的具体内容，参见[创建告警内容](create_alert_content)。

## 操作步骤

1. 在EnOS Console的导航菜单中，点击 **告警管理 > 告警规则** 。

2. 点击 **新增规则**，在弹窗中定义触发告警的详细规则。如下图所示。

   .. image:: media/create_alert_rule.png
      :alt: Figure: Create alert rule

   - **规则编号**
     
     用户为该规则定义的编号。支持字母、数字、英文句号（.）、下划线（_）、短横线（-），不超过50个字符。
  
   - **选择模型**

     选择告警规则适用的资产模型和测点。关于如何定义资产模型，请参考[模型管理](../model/model_overview)。

   - **触发条件**

     选择触发告警的条件，并为选择的条件设置相应的阈值或者阈值范围。比如，你可以设置当某测点的值大于等于某个值的时候，触发告警。

   - **作用域**

     选择告警规则的作用范围：
     - 如选择**All Devices**，则该规则作用于所有基于该模型的资产实例。
     - 如指定一棵资产树，则该规则作用于该资产树内所有基于该模型的实例。你也可以指定资产树内的节点，则规则只适用于指定的节点。当资产树产生更新时，规则将自动被继承至相关节点。如，当规则作用的节点下新增了子节点，则子节点自动继承父节点上定义的告警规则。

   - **告警内容**

     为告警规则选择预设的告警内容。

   - **告警级别**

      根据业务需要，为告警规则选择预设的告警级别，如严重，警告，信息等。
  
   - **标签**

      用户可添加自定义的标签。便于根据实际情况对告警规则进行管理。

   - **告警屏蔽**

     仅当**作用域**为指定资产树时有效。开启告警屏蔽后，规则作用的资产树节点以下的子节点告警将被屏蔽，不再上报给应用侧。该选项可帮忙有效减少无效的告警。有关屏蔽行为的详细信息，参见[屏蔽告警](masking_alert)。

   - **是否启用**

     是否启用该条告警规则。

## 结果

在创建或编辑告警规则后，该规则将于5分钟后生效。你可以在 **告警管理 > 告警记录** 中查看当前告警和历史告警。
