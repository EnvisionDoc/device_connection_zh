# 管理设备

本文章描述了如何进行查看和改变设备状态，如何获取设备秘钥凭证信息等管理操作。

## 开始前准备

- 你需要有设备管理操作权限，如果没有请联系组织管理员添加，参见[策略，角色，与权限](/docs/iam/zh_CN/latest/access_policy)。
- 了解设备的激活运行状态，参考[基于密钥的单向认证](../../../learn/deviceconnection_authentication)。

## 查看激活状态

1. 在控制面板中选择 **设备管理**。

2. 在 **设备列表** 页面中 **状态/启用** 栏可查看设备状态。

   **未激活** 状态只在产品未被激活时显示。一旦产品被激活，控制台将显示设备的运行状态：在线和离线。

## 下线/上线设备

当设备进入运行状态以后，你可以通过开启和关闭操作改变其运行状态。

如果发现设备有异常情况，可在EnOS中禁用该设备。

1. 在控制面板中选择 **设备管理**。

2. 在设备列表中找到目标设备，在 **状态/启用状态** 栏中选择下线该设备。


## 获取设备三元组信息

设备三元组信息包括`Product Key`, `Device Key` 和 `Device Secret`。

1. 在EnOS控制台中选择 **设备管理**。

2. 在设备列表中找到目标设备，点击该设备的 **查看** 进入设备详情页面。

3. 找到`Product Key`, `Device Key` 和 `Device Secret`的信息。

## 批量更新设备

你可以使用批量更新设备功能，下载设备模板、按需编辑再上传，实现一次操作多个设备信息。

1. 选择**设备管理 > 设备管理**；

2. 点击 **批量添加** ，在弹出的 **批量添加/更新设备** 弹窗中的 **操作** 一栏，选择 **批量更新**；

3. 在 **产品** 一栏，选择需要更新的设备所属的产品；

4. 在 **下载模板** 一栏：你可以选择 **下载空白模板** 然后点击下方的 **空白模板（.xlsx）** ，下载空白的模板进行编辑；也可以选择 **生成基础模板** ， 然后在下方的下拉列表中选择一个设备，然后点击右侧的 **生成模板（.xlsx）** 下载以选中设备为基础的模板；

   下载的模板文件名称为 Template_productKey.xlsx，productKey为该设备所属产品的product key。

5. 根据需要，编辑模板文件并保存；

6. 点击  |upload_file| ，找到模板文件并打开，点击**确定**；

   .. |upload_file| image:: ../../../media/button_upload_file.png

   EnOS开始解析上传的模板文件。完成之后，结果会显示在弹窗中。只要文件中包含了至少一条有效记录，就可以点击 **更新**， 将有效记录更新至EnOS；对于无效记录，你可以点击 **导出无效记录** ， 打开下载的 _errmsg.txt_ 文档， 查看相应无效记录的位置及无效的原因。

## 为网关设备批量添加子设备

在 **设备管理 > 设备管理**中，对于节点类型为 **网关** 的设备，单击操作栏的 |view| ，在**设备详情** 页，选择 **子设备** 标签页。点击 **添加子设备** ，从列表中勾选未被添加到其他网关设备下的设备，点击 **确定**， 即可向该网关设备添加子设备。

.. |view| image:: ../../../media/button_view.png

