# 转发一个物理设备数据至云端多个设备实例

在EnOS中，一个设备实例接收的来自物理设备的测点数据可以实时转发到另一个设备实例上。有关数据的同源多实例转发的主要概念如下：

- _数据源设备_ ：测点数据被转发的设备实例。
- _镜像设备_ ：接收从数据源转发来的数据的设备实例。

.. image:: ../../../media/mirroring_device_overview.png
 :width: 500px

某些业务场景下，同一棵资产树下的多个子节点需要共享一个设备资产的数据，也就是需要把同一个设备资产挂载到一棵资产下的多个节点下作为子节点：比如光伏发电领域，几个光伏发电场站需要共享同一个气象站的数据。而同一个设备在一棵资产树下，只能出现一次，不能同时挂载到多个节点下作为子节点。这时，你就可以为需要被共享的物理设备创建多个设备实例，将一个实例作为数据源设备，其他实例作为镜像设备，将物理设备的数据发送至数据源设备后，再转发到各镜像设备，然后再将多个设备实例根据需要挂载到同一资产树下多个位置即可。

.. image:: ../../../media/mirroring_device.png
 :width: 500px

## 使用规则与限制

- 数据源设备和镜像设备必须处于同一个OU内。

- 你只能选择 **未激活** 状态的设备作为镜像设备。

- 你不能指定数据源设备成为其他设备的镜像设备，也不能让镜像设备再转发数据、成为数据源设备。

- 同一个数据源设备，可以有多个镜像设备。同一个镜像设备只能接收一个数据源设备转发来的数据。

- 单个数据源设备最多可以有100个镜像设备。

## 任务描述

本文介绍了如何在一个OU内，将一个物理设备的数据，发送至多个设备实例的步骤。

## 前置条件

- 你需要有设备管理操作权限，如果没有请联系组织管理员添加，参见[策略，角色，与权限](/docs/iam/zh_CN/dev/access_policy)。
- 你已经为物理设备在EnOS上创建了一个设备实例，物理设备的测点数据已实时发送到该设备实例上，参考[注册设备](creating_device)。

## 创建镜像设备

1. 选择 **设备管理 > 设备管理**。

2. 创建一个设备实例，具体步骤参见[注册设备](creating_device)；或者选择一个 **状态** 为 **未激活** 的已有设备实例。

 .. image:: ../../../media/mirroring_device_1.png

3. 在设备列表中，点击 |view| 进入 **设备详情** 页。

 .. |view| image:: ../../../media/button_view.png

4. 点击进入 **镜像** 标签页。

5. 在 **Device Key** 一栏，输入前置条件中创建的设备实例的Device key，将该设备作为数据源设备；或者点击 |view| ，从列表中选择数据源。

 .. image:: ../../../media/mirroring_device_2.png
 
 .. |view| image:: ../../../media/button_view.png

6. 点击确认，完成数据源的设定。

## 结果

在设备列表中，刚才设置了镜像功能的镜像设备，其 **状态** 显示为 **镜像设备** 。

.. image:: ../../../media/mirroring_device_3.png

## 后续操作

[管理镜像设备](managing_mirror_device)










